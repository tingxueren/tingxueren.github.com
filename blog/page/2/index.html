
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Tingxueren's Blog</title>
	<meta name="author" content="tingxueren">

	
	<meta name="description" content="既然享受了上网的便利，有时候就不得不忍受网络带来的痛苦。正上网看视频看的 high, 突然网页卡死了，刷新后网页都打不开，正聊 QQ 突然掉线了，想访问些国外网站发现输入域名后跳转到莫名其妙的网站，这时候你就要检查下自己的网络问题了。“工欲善其事，必先利其器”， Linux 下有很好用的网络工具 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Tingxueren's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Tingxueren's Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:tingxueren.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/112617278058034597125?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/tingxueren" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/tingxueren" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:tingxueren.github.io">
	</form>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/tingxueren">tingxueren</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('tingxueren', 4, false);
	})(jQuery);
</script>

	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/24/linux-chang-yong-wang-luo-gong-ju/">
		
			Linux 常用网络工具</a>
	</h2>
	<div class="entry-content">
		<p>既然享受了上网的便利，有时候就不得不忍受网络带来的痛苦。正上网看视频看的 high, 突然网页卡死了，刷新后网页都打不开，正聊 QQ 突然掉线了，想访问些国外网站发现输入域名后跳转到莫名其妙的网站，这时候你就要检查下自己的网络问题了。“工欲善其事，必先利其器”， Linux 下有很好用的网络工具，掌握了这些工具基本上就能找到网络出毛病的原因，自己动手修复了。</p>

<h2>常用工具</h2>

<p>常用的工具一般有：ping、ifconfig、traceroute、nslookup、dig、whois、iftop、ntop等，下面简要介绍下</p>

<h3>ping</h3>

<p>ping 很简单，也是最常用的工具，常常用来测试网络是否联通，用法：ping ip/host 即可，Windows 下也用同样的命令</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 测试网络是否联通</span>
</span><span class='line'><span class="nv">$ </span>ping  baidu.com
</span><span class='line'><span class="c"># 有时候 ping 的返回会很慢，这是因为 ping 会尽量将 ip 转化为域名，如果对应 ip 没有设置域名</span>
</span><span class='line'><span class="c"># 解析的话会直到超时才返回，可以添加 -n 参数，让 ping 立即得到返回数据</span>
</span><span class='line'><span class="nv">$ </span>ping -n 8.8.8.8
</span></code></pre></td></tr></table></div></figure>


<h3>ifconfig</h3>

<p>ifconfig 是用来查看本机网络的各种接口的， Windows 下对应命令为 ipconfig</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 本机执行 ifconig</span>
</span><span class='line'><span class="nv">$ </span>ifconfig
</span><span class='line'>eth0      Link encap:Ethernet  HWaddr 8c:89:a5:39:**:**
</span><span class='line'>          inet addr:192.168.1.100  Bcast:192.168.1.255  Mask:255.255.255.0
</span><span class='line'>          inet6 addr: fe80::8e89:a5ff:fe39:5c96/64 Scope:Link
</span><span class='line'>          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
</span><span class='line'>          RX packets:3591303 errors:0 dropped:10 overruns:0 frame:0
</span><span class='line'>          TX packets:3219419 errors:0 dropped:0 overruns:0 carrier:0
</span><span class='line'>          collisions:0 txqueuelen:1000
</span><span class='line'>          RX bytes:3257148705 <span class="o">(</span>3.2 GB<span class="o">)</span>  TX bytes:448474566 <span class="o">(</span>448.4 MB<span class="o">)</span>
</span><span class='line'>          Interrupt:43 Base address:0xe000
</span><span class='line'>
</span><span class='line'>lo        Link encap:Local Loopback
</span><span class='line'>          inet addr:127.0.0.1  Mask:255.0.0.0
</span><span class='line'>          inet6 addr: ::1/128 Scope:Host
</span><span class='line'>          UP LOOPBACK RUNNING  MTU:16436  Metric:1
</span><span class='line'>          RX packets:321987 errors:0 dropped:0 overruns:0 frame:0
</span><span class='line'>          TX packets:321987 errors:0 dropped:0 overruns:0 carrier:0
</span><span class='line'>          collisions:0 txqueuelen:0
</span><span class='line'>          RX bytes:75444551 <span class="o">(</span>75.4 MB<span class="o">)</span>  TX bytes:75444551 <span class="o">(</span>75.4 MB<span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># MAC地址我做了注释，可以看到本机只用一个网卡 eth0，lo 为本地环回接口</span>
</span><span class='line'><span class="c"># 本机 ip 为 192.168.1.100, 为一个私有地址，因为我的电脑是接在路由器下面的</span>
</span><span class='line'><span class="c"># 其他参数可以 man ifconfig</span>
</span></code></pre></td></tr></table></div></figure>


<h3>traceroute</h3>

<p>traceroute 是个路由跟踪命令，可以跟踪从本机到目标 ip 的具体路由过程，Windows 下对应的命令是 tracert</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 本机跟踪到 baidu.com 的路由过程</span>
</span><span class='line'><span class="nv">$ </span>traceroute baidu.com
</span><span class='line'>traceroute to baidu.com <span class="o">(</span>123.125.114.144<span class="o">)</span>, 30 hops max, 60 byte packets
</span><span class='line'> 1  192.168.1.1 <span class="o">(</span>192.168.1.1<span class="o">)</span>  0.485 ms  1.117 ms  1.313 ms
</span><span class='line'> 2  192.168.149.254 <span class="o">(</span>192.168.149.254<span class="o">)</span>  4.472 ms  4.754 ms  4.785 ms
</span><span class='line'> *
</span><span class='line'> *
</span><span class='line'> 9  219.158.14.97 <span class="o">(</span>219.158.14.97<span class="o">)</span>  43.474 ms  43.522 ms  43.695 ms
</span><span class='line'>10  123.126.0.66 <span class="o">(</span>123.126.0.66<span class="o">)</span>  47.145 ms  47.186 ms  47.248 ms
</span><span class='line'>11  61.148.3.34 <span class="o">(</span>61.148.3.34<span class="o">)</span>  49.409 ms  49.523 ms  49.417 ms
</span><span class='line'>12  202.106.43.66 <span class="o">(</span>202.106.43.66<span class="o">)</span>  39.283 ms 202.106.43.174 <span class="o">(</span>202.106.43.174<span class="o">)</span>  40.238 ms  40.661 ms
</span><span class='line'>29  * * *
</span><span class='line'>30  * * *
</span><span class='line'>
</span><span class='line'><span class="c"># 为了保密删除了开头的几条路径</span>
</span><span class='line'><span class="c"># 有些路由禁止探测，比如第29, 30 跳</span>
</span><span class='line'><span class="c"># 最多跳数为 30, 到了30 跳虽然还没有到 baidu.com 但是命令结束了</span>
</span></code></pre></td></tr></table></div></figure>


<h3>nslookup</h3>

<p>nslookup 是用来查询 DNS 解析的，通过这个命令可以明显的看到 GFW 的常用手段 “DNS污染”。Windows 下的命令相同</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 执行 nslookup 用国内 DNS 服务器</span>
</span><span class='line'><span class="c"># 命令格式: nslookup 域名 DNS服务器</span>
</span><span class='line'><span class="c"># 查询 twitter.com 通过国内DNS服务器</span>
</span><span class='line'><span class="nv">$ </span>nslookup twitter.com  221.12.1.227
</span><span class='line'>Server:       221.12.1.227
</span><span class='line'>Address:  221.12.1.227#53
</span><span class='line'>
</span><span class='line'>Non-authoritative answer:
</span><span class='line'>Name: twitter.com
</span><span class='line'>Address: 59.24.3.173
</span><span class='line'><span class="c"># 通过 whois 查询可知 59.24.3.173 是个韩国ip</span>
</span><span class='line'><span class="c"># 挂上 vpn 通过 google dns 查询得到正确ip</span>
</span><span class='line'><span class="nv">$ </span>nslookup twitter.com  8.8.8.8
</span><span class='line'>Server:       8.8.8.8
</span><span class='line'>Address:  8.8.8.8#53
</span><span class='line'>
</span><span class='line'>Non-authoritative answer:
</span><span class='line'>Name: twitter.com
</span><span class='line'>Address: 199.59.150.39
</span><span class='line'>Name: twitter.com
</span><span class='line'>Address: 199.59.149.230
</span><span class='line'>Name: twitter.com
</span><span class='line'>Address: 199.59.148.10
</span></code></pre></td></tr></table></div></figure>


<h3>dig</h3>

<p>dig 命令和 nslookup 十分相似，也是用来进行 DNS查询的，命令格式也很简单 <code>dig @server host</code> 即可。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 我把我的另一个域名 tingxueren.info 指向了 tingxueren.github.com 在 github 上面维护了自己的blog，可以用</span>
</span><span class='line'><span class="c"># dig 查询下，会发现 ip 一致</span>
</span><span class='line'><span class="c"># dig tingxueren.info</span>
</span><span class='line'><span class="nv">$ </span>dig @8.8.8.8 tingxueren.info
</span><span class='line'>
</span><span class='line'>; &lt;&lt;&gt;&gt; DiG 9.8.1-P1 &lt;&lt;&gt;&gt; @8.8.8.8 tingxueren.info
</span><span class='line'>; <span class="o">(</span>1 server found<span class="o">)</span>
</span><span class='line'>;; global options: +cmd
</span><span class='line'>;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER<span class="s">&lt;&lt;- opcode: QUERY, status: NOERROR, id: 16481</span>
</span><span class='line'><span class="s">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</span>
</span><span class='line'>
</span><span class='line'><span class="s">;; QUESTION SECTION:</span>
</span><span class='line'><span class="s">;tingxueren.info.     IN  A</span>
</span><span class='line'>
</span><span class='line'><span class="s">;; ANSWER SECTION:</span>
</span><span class='line'><span class="s">tingxueren.info.  1800    IN  A   204.232.175.78</span>
</span><span class='line'>
</span><span class='line'><span class="s">;; Query time: 368 msec</span>
</span><span class='line'><span class="s">;; SERVER: 8.8.8.8#53(8.8.8.8)</span>
</span><span class='line'><span class="s">;; WHEN: Sat Nov 24 19:23:45 2012</span>
</span><span class='line'><span class="s">;; MSG SIZE  rcvd: 49</span>
</span><span class='line'><span class="s"># dig tingxueren.github.com</span>
</span><span class='line'><span class="s">dig @8.8.8.8 tingxueren.github.com</span>
</span><span class='line'>
</span><span class='line'><span class="s">; &lt;&lt;&gt;&gt; DiG 9.8.1-P1 &lt;&lt;&gt;&gt; @8.8.8.8 tingxueren.github.com</span>
</span><span class='line'><span class="s">; (1 server found)</span>
</span><span class='line'><span class="s">;; global options: +cmd</span>
</span><span class='line'><span class="s">;; Got answer:</span>
</span><span class='line'><span class="s">;; -&gt;&gt;HEADER&lt;&lt;- opcode</span>: QUERY, status: NOERROR, id: 51234
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
</span><span class='line'>
</span><span class='line'>;; QUESTION SECTION:
</span><span class='line'>;tingxueren.github.com.       IN  A
</span><span class='line'>
</span><span class='line'>;; ANSWER SECTION:
</span><span class='line'>tingxueren.github.com.    43200   IN  A   204.232.175.78
</span><span class='line'>
</span><span class='line'>;; Query <span class="nb">time</span>: 180 msec
</span><span class='line'>;; SERVER: 8.8.8.8#53<span class="o">(</span>8.8.8.8<span class="o">)</span>
</span><span class='line'>;; WHEN: Sat Nov 24 19:26:58 2012
</span><span class='line'>;; MSG SIZE  rcvd: 55
</span></code></pre></td></tr></table></div></figure>


<h3>whois</h3>

<p><a href="http://zh.wikipedia.org/zh-cn/WHOIS">WHOIS</a>（读作“Who is”，而非缩写）是用来查询互联网中域名的IP以及所有者等信息的传输协议。上面才查找 twitter 的错误 ip 的时候已经用过了，现在把刚才信息贴出来。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>whois 59.24.3.173
</span><span class='line'><span class="c"># 韩文显示不正常，省略</span>
</span><span class='line'><span class="c"># ENGLISH</span>
</span><span class='line'>
</span><span class='line'>KRNIC is not an ISP but a National Internet Registry similar to APNIC.
</span><span class='line'>
</span><span class='line'><span class="o">[</span> Network Information <span class="o">]</span>
</span><span class='line'>IPv4 Address       : 59.0.0.0 - 59.31.255.255 <span class="o">(</span>/11<span class="o">)</span>
</span><span class='line'>Service Name       : KORNET
</span><span class='line'>Organization Name  : Korea Telecom
</span><span class='line'>Organization ID    : ORG1600
</span><span class='line'>Address            : 206, Jungja-dong, Bundang-gu, Sungnam-ci
</span><span class='line'>Zip Code           : 463-711
</span><span class='line'>Registration Date  : 20040831
</span><span class='line'>
</span><span class='line'><span class="o">[</span> Admin Contact Information <span class="o">]</span>
</span><span class='line'>Name               : IP Administrator
</span><span class='line'>Phone              : +82-2-500-6630
</span><span class='line'>E-Mail             : kornet_ip@kt.com
</span><span class='line'>
</span><span class='line'><span class="o">[</span> Tech Contact Information <span class="o">]</span>
</span><span class='line'>Name               : IP Manager
</span><span class='line'>Phone              : +82-2-500-6630
</span><span class='line'>E-Mail             : kornet_ip@kt.com
</span><span class='line'>
</span><span class='line'><span class="o">[</span> Network Abuse Contact Information <span class="o">]</span>
</span><span class='line'>Name               : Network Abuse
</span><span class='line'>Phone              : +82-2-100-0000
</span><span class='line'>E-Mail             : abuse@kornet.net
</span><span class='line'><span class="c"># GFW 常常会把 “非法网站” 进行 DNS 投毒，解析到韩国的 ip，韩国是躺着也中枪</span>
</span></code></pre></td></tr></table></div></figure>


<h3>iftop 和 ntop</h3>

<p>这两个工具是用来做流量监控的，iftop 比较简陋，提供的是字符界面，ntop 安装后可以在本机浏览器打开 3000 端口会有图形界面的，内容相当的详细。对这两个工具了解的不多，只是刚开始用，可以看下下面这两个帖子。
1. <a href="http://www.vpser.net/manage/iftop.html">Linux流量监控工具 &ndash; iftop (最全面的iftop教程)</a>
2. <a href="http://netslyz.blog.51cto.com/1006247/407510/">在RHEL5下使用NTOP监测网络流量</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-24T18:22:00+08:00" pubdate data-updated="true">Nov 24<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/08/dai-ma-gao-liang-zhe-teng-bi-ji/">
		
			代码高亮折腾笔记</a>
	</h2>
	<div class="entry-content">
		<p>这几天 wordpress 也搭建好了，就开始折腾了，别的配置都是比较简单的，基本上就是换主题，改插件的事情。不懂php也就没有大的改动，就是找了个能看的过去的主题用了个 cache 的插件优化了下，为了听音乐还在侧边栏贴上了个虾米播播，虾米的服务挺好的，赞一个。作为个程学猿还是想在 blog 上分享点代码的，代码显示的不好，连写字的心情都没有。折腾代码的高亮和漂亮的显示是最头疼的事情，还好最后找到了个基本完美的方案，在折腾 wordpress 的同时也研究了下 octopress 的代码高亮，写个日志以为记。</p>

<h2>wordpress 代码高亮方案</h2>

<p>总体上 wordpress 方案就是找插件，但是找到个可以用的，用着顺手的插件真的好麻烦,经过了很多的测试终于选定了现在用的插件。下面是各个插件的试用感受。</p>

<ul>
<li><p><a href="http://www.boke8.net/wordpress-wp-syntax-button.html">WP-Syntax</a></p>

<p>这个插件是我用的第一个插件，还有个 <code>WP-Syntax Button</code> 配套的按钮，用起来还是凑合。但是用了一段后发现严重的问题，在编辑的时候如果来回的在可视化视图和 html 视图之间切换的话会造成代码不能正常的高亮，排版被破坏，而且不支持 tab 缩进，这点是我最不能忍受的。我所有的代码都是 tab 缩进的贴在网页上却把所有的 tab 都删除了，代码看起来就一团糟了。</p></li>
<li><p><a href="http://codeup.org/archives/128">SyntaxHighlighter</a></p>

<p>因为 WP-Syntax 的不靠谱我又换了这个插件，这个插件比 WP-Syntax 好用的多了，一切都在可视化视图中修改就好，语法也很简单：[lang]code[/lang],这样做就好了而且切换可视化视图和 html 视图的话代码也不会乱掉。但是不支持 tab 缩进的问题依然没有解决。</p></li>
<li><p><a href="http://www.guansoft.com/syntaxhighlighter.html">SyntaxHighlighter++</a></p>

<p>这个插件完美的解决了我的问题不得不赞个，安装后会在编辑页面出现个新的编辑窗口，把代码贴上去，然后点击插入就好了。支持 tab 缩进，不需要改动 html 代码用着很舒服，还是国人写的，更要支持下，以后不出意外的话这个插件会一直用下去。</p></li>
</ul>


<h2>octopress 代码高亮方案</h2>

<p>   以前用 octopress 写东西的时候没注意代码高亮的问题，原来插入代码为了美观只是在 markdown 文本里面把代码行缩进8个空格，排整齐，效果还凑合，但是这样不会有高亮的效果的，而且手动的打空格是很憋屈的事情。查找了下官方的教程终于找到了适合的方案。</p>

<p>   官方的<a href="http://octopress.org/docs/blogging/code/"> octopress 代码高亮教程</a>,同时还有篇<a href="http://xiongbupt.github.com/blog/2012/06/08/octopressdai-ma-gao-liang/">非官方中文翻译</a>。</p>

<p>   看了这两篇文章后我就准备尝试，但是还是不知道markdown源文件到底该怎么写，幸好 octopress 的<a href="https://github.com/imathis/octopress">官网</a>就托管在 github 上，上面有生成的页面，也有 markdown 源代码,这下可以对照着看了。</p>

<p>   我很喜欢<code>backtick-codeblock</code>的代码高亮方式，很简单，在代码前后加上三个反引号就好了，在 github 上找到了<a href="https://github.com/imathis/octopress/blob/site/source/docs/plugins/backtick-codeblock/index.markdown"> markdown 文件</a>。下面是简单的摘录。</p>

<ul>
<li><p>语法</p>

<pre><code> ``` [language] [title] [url] [link text] [linenos:false] [start:#] [mark:#,#-#]
 code snippet
 ```
</code></pre></li>
<li><p>Basic options</p>

<pre><code> [language] - Used by the syntax highlighter. Passing 'plain' disables highlighting.
 [title] - Add a figcaption to your code block.
 [url] - Download or reference link for your code.
 [Link text] - Text for the link, defaults to 'link'.
</code></pre></li>
<li><p>源码</p>

<pre><code> ``` ruby Discover if a number is prime http://www.noulakaz.net/weblog/2007/03/18/a-regular-expression-to-check-for-prime-numbers/ Source Article
 class Fixnum
   def prime?
     ('1' * self) !~ /^1?$|^(11+?)\1+$/
   end
  end
 ```
</code></pre></li>
<li>显示效果</li>
</ul>


<figure class='code'><figcaption><span>Discover if a number is prime</span><a href='http://www.noulakaz.net/weblog/2007/03/18/a-regular-expression-to-check-for-prime-numbers/'>Source Article</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Fixnum</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">prime?</span>
</span><span class='line'>    <span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="o">*</span> <span class="nb">self</span><span class="p">)</span> <span class="o">!~</span> <span class="sr">/^1?$|^(11+?)\1+$/</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>注意事项</h3>

<p>   指定高亮的代码的语言时要写清楚，shell 脚本的语言类型是 <code>sh</code>，即使是 <code>Bash</code> 的脚本也应该用 <code>sh</code>，写作 <code>bash</code> 在  <code>rake generate</code> 的阶段会报错的。</p>

<h3>高亮代码展示</h3>

<figure class='code'><figcaption><span>shell 命令行</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># 升级源，并更新系统</span>
</span><span class='line'><span class="nv">$ </span>sduo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get upgrade
</span><span class='line'><span class="c"># 得到系统的内核信息</span>
</span><span class='line'><span class="nv">$ </span>uname -a
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>c++ 代码</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="cp">#include &lt;iostream&gt;  </span>
</span><span class='line'><span class="cp">#include &lt;algorithm&gt;  </span>
</span><span class='line'><span class="cp">#include &lt;string&gt;  </span>
</span><span class='line'><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">string</span> <span class="n">str1</span><span class="p">;</span>
</span><span class='line'>   <span class="n">string</span> <span class="n">str2</span><span class="p">;</span>
</span><span class='line'>   <span class="k">while</span><span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">str1</span><span class="o">&gt;&gt;</span><span class="n">str2</span><span class="p">)</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>       <span class="kt">int</span> <span class="n">nLen1</span><span class="p">,</span> <span class="n">nLen2</span><span class="p">,</span> <span class="n">nLen</span><span class="p">;</span>
</span><span class='line'>       <span class="n">nLen1</span> <span class="o">=</span> <span class="n">str1</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span><span class='line'>       <span class="n">nLen2</span> <span class="o">=</span> <span class="n">str2</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
</span><span class='line'>       <span class="n">nLen</span> <span class="o">=</span> <span class="n">nLen1</span> <span class="o">&gt;</span> <span class="n">nLen2</span> <span class="o">?</span> <span class="n">nLen1</span> <span class="o">:</span> <span class="n">nLen2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>       <span class="n">reverse</span><span class="p">(</span><span class="n">str1</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">str1</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span><span class='line'>       <span class="n">reverse</span><span class="p">(</span><span class="n">str2</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">str2</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>       <span class="c1">//高位补零  </span>
</span><span class='line'>       <span class="k">if</span> <span class="p">(</span><span class="n">nLen</span> <span class="o">&gt;</span> <span class="n">nLen1</span><span class="p">)</span> <span class="n">str1</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">nLen</span> <span class="o">-</span> <span class="n">nLen1</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
</span><span class='line'>       <span class="k">if</span> <span class="p">(</span><span class="n">nLen</span> <span class="o">&gt;</span> <span class="n">nLen2</span><span class="p">)</span> <span class="n">str2</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">nLen</span> <span class="o">-</span> <span class="n">nLen2</span><span class="p">,</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>       <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   <span class="c1">//进位数目  </span>
</span><span class='line'>       <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>       <span class="n">string</span> <span class="n">strResult</span><span class="p">;</span>    <span class="c1">//存储结果  </span>
</span><span class='line'>
</span><span class='line'>       <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">nLen</span><span class="p">)</span>
</span><span class='line'>       <span class="p">{</span>
</span><span class='line'>           <span class="k">if</span><span class="p">(</span><span class="n">str1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span><span class="mh">0x30</span> <span class="o">+</span> <span class="n">str2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span>
</span><span class='line'>           <span class="p">{</span>
</span><span class='line'>               <span class="n">strResult</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">str1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">str2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;9&#39;</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">temp</span><span class="p">);</span>
</span><span class='line'>               <span class="n">temp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>           <span class="p">}</span>
</span><span class='line'>           <span class="k">else</span>
</span><span class='line'>           <span class="p">{</span>
</span><span class='line'>               <span class="n">strResult</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">str1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">str2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span> <span class="o">+</span> <span class="n">temp</span><span class="p">);</span>
</span><span class='line'>               <span class="n">temp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>           <span class="p">}</span>
</span><span class='line'>           <span class="n">i</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>       <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>       <span class="k">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>          <span class="n">strResult</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;1&#39;</span><span class="p">);</span>
</span><span class='line'>       <span class="n">reverse</span><span class="p">(</span><span class="n">strResult</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">strResult</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</span><span class='line'>       <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">strResult</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'>   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-08T17:19:00+08:00" pubdate data-updated="true">Nov 8<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/02/zai-lnmphuan-jing-xia-an-zhuang-wordpress/">
		
			在LNMP环境下安装wordpress</a>
	</h2>
	<div class="entry-content">
		<p>买了vps后感觉总是让它在空跑很浪费资源的感觉，前期在上面安装了openvpn和ssh只
用来翻墙，看到负载常常是0.00真的很郁闷。将github.com上以前用octopress生成的
blog放上去，负载基本上还是零，郁闷了，准备捣鼓wordpress了。</p>

<h2>安装wordpress</h2>

<p>本来以为安装起来很麻烦，但是看了下教程竟然如此的简单。wordpress 需要php环境
和mysql，现在想起来网上卖的虚拟主机是什么东西了。就是分配一块磁盘空间，给客
建立个mysql帐号，大不了再给个ftp帐号，就这样就拿来卖了，相当的简单。还是vps
自由度高，想怎么折腾就怎么折腾。</p>

<p>vps上现在安装的是LNMP的一键安装包0.9版，有php和mysql环境，安装wordpress的环
境要求得到了满足。只需要以root权限运行 /vhost.sh 的脚本添加个新的网站，比如
myblog.com 就会在 /home/wwwroot/ 文件夹下生成网站的文件夹：myblog.com
以下的操作都会在这个文件夹进行。</p>

<pre><code>    #下载wordpress中文包 
    $wget http://cn.wordpress.org/wordpress-3.4.2-zh_CN.tar.gz
    #解压到本地
    $tar xzvf wordpress-3.4.2-zh_CN.tar.gz -C myblog.com
    #将文件转移到myblog.com
    $cp wordpress/* .
    $rm -rf wordpress
</code></pre>

<p>现在还需要个mysql帐号就好了，登陆phpadmin为blog专门建立个帐号，权限配置暂时
没搞清楚，除了管理权限什么都给了，应该有点多，以后搞懂后再修改吧，现在先用
着。然后访问域名 www.myblog.com 就会看到 wordpress 的欢迎页面，创建你的帐号
就可以用了。</p>

<h2>wordpress 调整</h2>

<p>一直对wordpress的可折腾性抱有很高的期望，在网上看到各种不同风格的wordpress
网站一直搞不懂是怎么做出来的。进入后台明白了，主要归功于wordpress的架构，可
以随心所欲的更换主题和添加插件。而且大部分的布局还可以自己调整，就是这种灵
活性造就了同样的架构，表现起来却千变万化。只要耐心，能折腾自己也能搞不独一
无二的blog。</p>

<h3>wordpress 主题</h3>

<p>主题还是比较容易更换的，在仪表盘上直接有主题的选项，点击安装新的主题即可，
比较郁闷的是我的wordpress不管安装了多少个主题，当前可用主题一直只有当前主题
其他的都不见了，最后搜索了原来是 LNMP 安装包的 php 设置的问题，修改下配置就
好了，可以看另一篇博文。</p>

<h3>wordpress 代码高亮显示</h3>

<p>作为未来的程序猿，免不了要在blog里贴点代码什么的，用 octopress 的时候，编辑
文章是自己写 Markdown 文档，只要按照规定的格式写就能自动的转化成不错的 html
代码，wordpress 是需要插件的，就是这个插件折腾的我都要崩溃了。</p>

<ul>
<li><p>网上推荐的是用的WP-Syntax，具体的使用可以参看这篇<a href="http://www.boke8.net/wordpress-wp-syntax-plugin.html">文章</a>, 还有一个button可以方便的在可视化状态
下插入代码。这个插件最郁闷的地方是插入代码必须在html视图下插入，但是转到可
视化的视图查看后再转回来就常常造成html代码混乱了，无法正常的代码高亮。开始
的时候插件工作的还很正常，但是经过几次实验后就彻底的罢工了，怎么也搞不成代
高亮了。</p></li>
<li><p>我的替代方案是用SyntaxHighlighter，简要介绍在<a href="http://codeup.org/archives/128">这里</a>。这个方案的特点是使用够简单，而且不需要在不同的视图之间转换。比
如添加 c++ 代码，只需要在可视化视图下[cpp] your code [/cpp] 即可，相当的
方便。</p></li>
<li><p>现在用的代码高亮的插件用起来还不错，不过有点很郁闷，wordpress 会自动的删
除 tab 的空白。本来本地的代码，用 tab 缩进的好好的，但是贴在 wordpress 就
会因为把 tab 缩进删除导致了漂亮的代码看起来惨不忍睹。解决方案有2种，一种是
自己手动添加空格，不用 tab 缩进，但是工程量很大；另一个方案是用万能的vim，
强大的vim竟然有直接将当前代码生成 html 的命令，确实强大到让人无语，这里有
简要的<a href="http://openwares.net/vim/vim_wordpress_syntax.html">介绍</a>。这里是
<a href="http://www.mars.tingxueren.com/index.php/2012/11/01/%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%BA%94%E7%94%A8vim-vim-%E5%91%BD%E4%BB%A4-tohtml/">效果</a>。 但是对
与 html 的代码无任何了解，vim 直接生成的代码贴上去后整个页面就无法编辑了,
如果编辑的话会产生莫名奇妙的错误，等以后了解了 html 后再用 vim 生成的代码
了。</p></li>
</ul>


<h3>虾米音乐插件</h3>

<p> 用了wordpress发现它的插件是很强大的，因为的有php的网页，动态交互什么的也
 不在话下。在网页中插个播放器什么的比 octopress 的话方便很多。我用的是个
 <a href="http://www.appinn.com/tinymce-xiami-music/">TinyMCE Xiami Music for WordPress</a>, 直接抓取虾米的音乐放在页面，挺不错的。</p>

<h3>关于图片和媒体及版本控制</h3>

<p> 用了一段 wordpress 后我总算是明白了mysql数据库是干什么的，插入的媒体，图片
 什么的都会存储在 mysql 数据库中，可以方便的在文章中插入，这点在 Markdown
 中插入图片方便。同时 mysql 数据库还保留了同一篇文章你不同时间修改的版本，
 当你发现当前的版本不合适时可以很容易的恢复到历史版本。</p>

<p>wordpress 的强大功能还有待发掘，就这么短短的试用时间来说还是不错的，基本上
比较满意。以后 wordpress 的 blog 主要放图片比较多的文章，毕竟 wordpress 插
入媒体比较方便，octopress 的 blog 适合随手写的东西，毕竟在本地 vim 中码点字
比用 wordpress 的在线编辑器体验好很多。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-02T20:36:00+08:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/10/20/zhe-teng-vpsshou-ji/">
		
			折腾vps手记</a>
	</h2>
	<div class="entry-content">
		<p>前几天闲逛网页发现了个网站上介绍的一个美国 vps 首月免费，兴冲冲的去注册，把玩了一个下午。环境什么都配置好的时候突然发现登陆不上了，然后就收到了邮件，只提供 3 个小时的免费试用时间，然后我的 vps 就被删除了。靠他大爷的，郁闷了，气的都要吐血了。</p>

<p>一怒之下准备花钱买个 vps 好好玩玩的，linode 是首选，但是因为是穷学生，没米，而且也没有信用卡，玩不起啊。正好逛逛 G+ 发现有人买了个日本的 vps， 配置还可以，关键是还很便宜，很对胃口，还支持支付宝，真是大大的良心啊。下单，买了一个，5 分钟后就可以 ssh 登陆了，确实很快速。</p>

<p>vps 配置还可以，虽然是 openVZ 的架构，但是保证有 512M 的内存，最大 1G 的内存, 10G 硬盘，100M 网络，流量限，感觉基本上够用了。只要 490 日元， 淘宝支付 39 大洋，还是挺好的，延迟也能接受，实验室基本上是 100ms， 宿舍的话 200ms，都能接受。</p>

<h2>初始化配置</h2>

<p>vps 开通后，就要开始进行配置了。我选择的系统是 ubuntu 10.04, 毕竟用 ubuntu 桌面版很长一段时间了，前几个月也在实验室的旧机器配置过 ubuntu server ，我相信这个系统我还是能搞定的。拿到 vps 的时候想把它升级到 12.04, 换日本的源，然后升级，最后升级完成后重启 vps 一直卡死了。没有办法只得到网页的控制面板将 vps 重置了。查找了下资料发现 openVZ 的内核和 host 的内核要一样的，如果服务商不支持高版本的系统的话 vps 是不能升级到高版本的，那就这样吧，10.04 继续用吧。</p>

<ul>
<li>新建帐号</li>
</ul>


<p>vps 开通的时候只有 root 帐号，一直用 root 帐号的话会不安全的，也没有必要，首先就要建立自己的常用帐号。可以使用以下命令：</p>

<pre><code>    # 建立 you_name 帐号，并加入 sudo 组    
    # useradd  -G sudo -m -s /bin/bash   you_name

    # 设置密码
    # passwd you_name   

    # 加入 adm 组，阅读系统 log
    # usermod -G adm -a you_name
</code></pre>

<p>这样就建立了个有管理员权限的帐号，一般可以用这个帐号管理 vps，而不需要用
root 帐号。</p>

<ul>
<li>修改时区别和locale设置</li>
</ul>


<p>由于 vps 所在地是日本，时区为东九区，vps 的时间比我们的本地时间快了 1 个小时，看起来很不爽，修改时区还是很简单的，执行下述命令就好。</p>

<pre><code>    $ sudo dpkg-reconfigure tzdata
    # 选择 Asia/Shanghai 一切 ok
</code></pre>

<p>同样，因为是日本的服务器，locale 设置的不对，执行命令时常常会出现下面的报错
提示:</p>

<pre><code>    perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
</code></pre>

<p>因为是服务器，en_US.utf8 才是王道，下面就来安装 en_US.utf8:</p>

<pre><code>    root@ubuntu-vps:~# cd /usr/share/locales
    root@ubuntu-vps:/usr/share/locales# ls
    install-language-pack  remove-language-pack
    root@ubuntu-vps:/usr/share/locales# ./install-language-pack en_US
    Generating locales...
      en_US.UTF-8... done
      Generation complete.
</code></pre>

<p>执行 locale 看安装是否成功:</p>

<pre><code>    roots@ubuntu-vps:~# locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC=en_US.UTF-8
LC_TIME=en_US.UTF-8
LC_COLLATE="en_US.UTF-8"
LC_MONETARY=en_US.UTF-8
LC_MESSAGES="en_US.UTF-8"
LC_PAPER=en_US.UTF-8
LC_NAME=en_US.UTF-8
LC_ADDRESS=en_US.UTF-8
LC_TELEPHONE=en_US.UTF-8
LC_MEASUREMENT=en_US.UTF-8
LC_IDENTIFICATION=en_US.UTF-8
LC_ALL=
</code></pre>

<p>最后还要执行 update-locale 命令，否则在 /var/log/auth.log 中会出现
“pam_env can&rsquo;t open /etc/default/locale &ldquo; 的错误。</p>

<ul>
<li>修改 ssh 设置，增强安全性</li>
</ul>


<p>ssh 基本是我们管理 vps 的最好的手段了，保护好 ssh 的连接对增强 vps 的安全性有重大的作用。可以从三个方面入手，一个是修改 ssh 默认的 22 端口到自定义端口；其二是禁止远程 root 登陆；其三是禁止密码登陆，只用密钥登陆。基本上是修改
ssh 的配置文件，下面是具体步骤。</p>

<ol>
<li><p>修改 ssh port ，禁止 root 远程登陆</p>

<pre><code> # 修改 ssh 配置文件，在文件中修改下面选项
 sudo vi /etc/ssh/sshd_config
 # 修改 ssh port， 先增加个端口，重启 ssh 成功后再把默认端口
 # 删除，防止发生不能ssh登陆的悲剧
 port ***
 # 禁止 root 登陆
 PermitRootLogin no
 # 重启 ssh 服务
 sudo service ssh restart
</code></pre></li>
<li><p>设置密钥登录</p>

<pre><code> # 本地生成密钥，在本机 .ssh 目录下运行下面的命令
 # 密钥名可以自定义，如默认的id_rsa
 ssh-keygen
 # 拷贝公钥到 vps
 scp ~/.ssh/id_rsa.pub example_user@vps_ip
 # vps 上建立 .ssh 目录
 mkdir .ssh
 # 拷贝并重命名公钥 
 mv id_rsa.pub .ssh/authorized_keys
 # 增强公钥的安全性
 chown -R example_user:example_user .ssh
 chmod 700 .ssh
 chmod 600 .ssh/authorized_keys

 # 测试
 $ ssh -p port -i .ssh/id_rsa example_user@vps_ip
 # 如果成功可以禁止密码登陆
 sudo vi /etc/ssh/sshd_config
 PasswordAuthentication no
 # 重启 ssh  
 sudo service ssh restart
</code></pre></li>
<li><p>修改主机名称</p></li>
</ol>


<p>vps 的默认主机名称是一段数值，看起来很不爽，准备修改成自己喜欢的名字</p>

<pre><code>    # 修改 /etc/hosts
    127.0.1.1    oldname
    替换为
    127.0.1.1    newname
    # 编辑 /etc/hostname
    $ sudo echo "newname" &gt; /etc/hostname
    # 运行下面命令
    $ sudo hostname newname
    # 必要时可能要重启机器
</code></pre>

<h2>安装 LNMP 环境</h2>

<p>LNMP一键安装包是一个用Linux Shell编写的可以为CentOS/RadHat、Debian/Ubuntu
VPS(VDS)或独立主机安装LNMP(Nginx、MySQL、PHP、phpMyAdmin)生产环境的Shell程序。</p>

<p>具体步骤可以参考 <a href="http://lnmp.org/">lnmp.org</a> 的介绍。
安装时间比较长，需要耐心等待。</p>

<h2>安装 openvpn</h2>

<p>在这个 GFW 猖狂的年代，vpn 已经成为了上网的必备工具，有了 vps 后在上面安装
好了 vpn 就可以享受无阻碍的网络，还省了购买 vpn 的钱。在 vps 上安装 openvpn
网上有很多不错的教程，我主要参考了以下的教程设置的。</p>

<p>教程1：<a href="http://www.vpser.net/build/linode-install-openvpn.html">Linode VPS OpenVPN安装配置教程</a>
教程2：<a href="http://www.douban.com/note/97996409/">OpenVZ vps下的openvpn安装</a></p>

<pre><code>特别注意的是，因为是 openVZ 的 vps 要用DST NAT
iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -j SNAT --to vps_ip
</code></pre>

<p>基本上按照上述的教程即可安装好 openvpn。</p>

<h2>设置 iptables</h2>

<p>iptables 是 linux 的防火墙，为了 vps 的安全必须按照一定的规则过滤进出 vps 的
数据，准许必要的端口开放，关掉非必要的端口，减少被攻击的可能性。一般来说开放
ssh，ftp，http，https，mysql，openvpn 的端口即可，这个是我的 iptables 设置的<a href="/codes/iptables_init.sh">脚本</a>。</p>

<h2>参考资料</h2>

<ol>
<li><a href="http://library.linode.com/">library.linode.com</a></li>
<li><a href="http://blog.chinaunix.net/uid-27029423-id-3328463.html">openvpn_server参数详解</a></li>
<li><a href="%E4%BD%BF%E7%94%A8%20OpenVPN%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BF%BB%E5%A2%99%E7%9A%84%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">使用 OpenVPN 服务器翻墙的相关问题解决</a></li>
<li><a href="http://www.networkvps.com/index.php/archives/1135">Iptables 设置脚本一例</a></li>
<li><a href="http://www.zrblog.net/2284.html">VPS简单性能测试命令</a></li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-10-20T18:55:00+08:00" pubdate data-updated="true">Oct 20<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/09/10/install-dropbox-in-linux/">
		
			Install Dropbox in Linux</a>
	</h2>
	<div class="entry-content">
		<p>Dropbox 是个很神奇的工具，你可以用它来同步重要的文件，配置。可以放心的把文件放在云端，作为备份。Dropbox 有着齐全的平台覆盖，不但有 windows客户端，MAC 客户端，还有 ios 客户端，Android 客户端，最让我高兴的是还有 Linux 客户端，这点让我十分的欣赏。Dropbox 真正的实现了全平台覆盖，在不同的平台上都给人一致的体验。</p>

<h2>Dropbox 的安装</h2>

<p>天朝是个神奇的地方，基本上好的互联网服务都会被 #GFW 认证。可以说被 #GFW 认证的服务才是靠谱和真正有价值的服务。</p>

<p>为了能正常的使用 Dropbox 请认真学习各种翻墙技能，常常温故知新，多准备些备用手段，以便应付 #GFW 层出不穷的攻击手段。推荐的梯子有 VPN、SSH、GAE（GoAgent，Wallproxy）等等。</p>

<ul>
<li><p>为了使用 Dropbox，必须先有个帐号，Dropbox 主页被墙，请自备梯子。客户端
暂时还能正常的使用，但是有个问题，在两台电脑之间无法即时同步，因为提供即
时同步功能的服务器与客户端用的是 http 协议，被 #GFW 干扰。但是重新关闭客
户端后即可正常同步，天朝威武，把好好的自动工具搞成了半自动。</p></li>
<li><p>在主页上有 Dropbox 软件下载, Windows 下客户端是一个单一个软件，Linux
下却会给人带来点小麻烦。</p></li>
<li><p>在 ubuntu 下软件中心有 Dropbox，但是安装后会有以下的画面：</p></li>
<li><p><img src="/images/dropbox-error.png" title="dropbox error" alt="" /></p>

<p>原因是软件中心的 Dropbox 只是个 nautilus 插件，由它整合 Dropbox 和 nautilus
本身并不是完整的客户端，需要从 Dropbox 官网下载完整的安装包。</p></li>
<li><p>然后在下载的安装包的过程中，你会发现安装进程像卡死一样一动不同。
不用怀疑，是 #GFW 发威了，它阻断了你与 Dropbox 官网的连接，为了正常的用 Dropbox，
我们需要手动安装客户端。</p></li>
<li><p>令人高兴的是 Dropbox 提供了安装包的完整的下载版本，可以在<a href="https://www.dropbox.com/install?os=lnx">Dropbox官网</a>查看。</p></li>
<li><p>下载安装有两种方式，一种是从浏览器下载，然后解压，执行; 另一种是自己在终
端中执行所有的操作。</p></li>
<li><p>翻墙方式首选 VPN ，然后终端中的命令可以顺利的执行，如果是用 GoAgent 等
工具的话需要在执行前设置终端的代理，让终端接下来的操作都通过代理进行，
即通过代理下载安装包，由于安装软件需要 root 权限，切记在设置代理前，切换
为 root 用户，下面 GoAgent 为例说明设置（8087为GoAgent默认端口）。</p>

<pre><code> export http_proxy=http://127.0.0.1:8087   
 export https_proxy=http://127.0.0.1:8087   
</code></pre></li>
<li><p>然后在终端中执行下面命令以完成安装：</p>

<pre><code> # 32 位系统执行下面命令
 $cd ~ &amp;&amp; wget -O - "https://www.dropbox.com/download?plat=lnx.x86" | tar xzf -

 # 64 位系统执行下面命令
 $cd ~ &amp;&amp; wget -O - "https://www.dropbox.com/download?plat=lnx.x86_64" | tar xzf -
</code></pre></li>
<li><p>最后执行下面的命令</p>

<pre><code> $ ~/.dropbox-dist/dropboxd
</code></pre></li>
</ul>


<p>Dropbox 安装顺利完成，享受全平台同步的快感吧。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-10T20:49:00+08:00" pubdate data-updated="true">Sep 10<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/07/shelljiao-ben-fen-xiang/">
		
			Shell脚本分享</a>
	</h2>
	<div class="entry-content">
		<p>用着 linux 免不了要和 shell 打交道，shell 是个很强大的工具，内置了多有用的程序，配合着 linux 的管道机制，可以将这些小工具组合成各种各样的脚本，为你服务。下面简单的介绍并分享我的几个小脚本。</p>

<h2>脚本的结构</h2>

<ul>
<li><p>脚本的第一行一般是 <code>#!/bin/bash</code> 或者是 <code>#!/bin/sh</code>, 表明执行脚本的程序为
<code>bash</code> 或者是 <code>sh</code> 。</p></li>
<li><p>以 <code>#</code> 开头的为注释，执行时会自动忽略。</p></li>
<li><p>脚本在执行时可以从外界获取参数，一般执行脚本的格式为 <code>test.sh arg[1] arg[2] ...</code> , 在脚本内部 <code>$0</code> 代表脚本的名称， <code>$1</code> 代表第一个参数，以此类推。</p></li>
<li><p>脚本中常用的命令</p>

<ul>
<li><p>find 和 exec</p>

<pre><code># 一般用 find 命令找到符合要求的项目，然后调用 command 处理每一项
find path [-type] [f]  [-name] ["*.txt"]  -exec command argument '{}' \;
</code></pre></li>
<li><p>sed awk cut</p>

<pre><code># 这三个一般都是用来对获取的文本进行处理
# 获取文件扩展名, 即如果输入为test.txt, 输出为txt
sed 's/^.*\.//g'
# 输出 ps aux 的输出项的前两列
ps aux | awk '{print $1, $2}' 
# cut 即剪切工具，下面是取出以空格为分隔符，取出第一部分的命令
cut -d ' '  -f 1   
</code></pre></li>
</ul>
</li>
</ul>


<h2>我的小脚本</h2>

<ul>
<li><p><a href="/codes/iconv_shell.sh">文本格式转换脚本</a></p>

<p>用 linux 有一个很头疼的问题就就是中文的乱码问题，linux 下中文的编码格式是
utf-8, windows 默认编码格式是 GB2312， 这导致了 windows 下的文本文件在
linux 下常常是乱码的，同理 linux 下编辑的文本文件在 windows 下也会乱码。
为此我们要进行字符编码的转换，即利用 <code>iconv</code> 命令。<code>iconv</code> 命令的基本格式
如下：
      iconv -f oldcharset -t newcharset  file -o newfile
脚本实现了自动获取字符编码，并转换为 UTF-8 编码的功能，为了解决常常遇到的
未知编码问题，加入了个默认功能，如果编码未知，强制性的进行 GB18030 到
UTF-8 的功能，运行起来效果还好。根据这个又修改成了一个右键调用的
<a href="/codes/UTF8.sh">nautilus-script</a>。</p></li>
<li><p><a href="/codes/chmod_recursion.sh">批量更改文件权限脚本</a></p>

<p>在拷贝文件时常常遇到拷贝回来的文件的权限不对，一个个更改很麻烦，
脚本主要用<code>find</code>命令查找对应的项目，然后通过 <code>exec</code> 调用 <code>chmod</code>
而成，具体请看脚本。</p></li>
<li><p><a href="/codes/chown_recursion.sh">批量更改文件所有者脚本</a></p>

<p>和上面的脚本很相似，也是用 <code>find</code>, <code>exec</code>, <code>chown</code>,组合而成，
<code>chown</code>可以同时更改文件的所有者和所属组。</p></li>
<li><p><a href="/codes/mod-file-extension.sh">更改文件后缀名</a></p>

<p>有时候文件的后缀名不符合要求，如要把 <code>htm</code> 后缀换成 <code>html</code> 后缀，这个脚本
就很有用。主要用到了一个命令 <code>rename</code>。</p>

<pre><code>  # 将说用的 *.htm 后缀换成 html
  renam 's/htm$/html' *.htm
</code></pre></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-07T21:26:00+08:00" pubdate data-updated="true">Aug 7<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/05/new-blog-with-octopress/">
		
			New Blog With Octopress</a>
	</h2>
	<div class="entry-content">
		<h2>新的 blog</h2>

<p>对前几天建立的 blog ，基于 jekyllbootstrap 感到不爽，就换了个模板，即</p>

<p>基于 Octopress, 感觉这个配色还有配置我挺喜欢的。都是基于 jekyll 的，但是</p>

<p>Octopress 要求的更多，操作起来更复杂些。要求 Ruby 1.9.3 的支持，还有安装</p>

<p>一大堆的 gem, 不过还好，效果蛮不错的，暂时就先这样了。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-05T11:52:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/05/zao-an-%2Cshi-jie/">
		
			早安，世界</a>
	</h2>
	<div class="entry-content">
		<h2>中文的题目貌似也可以</h2>

<p>就是题目被自动的转化为拼音，看起来有点蛋疼。</p>

<p>继续测试下列表</p>

<ul>
<li><p>列表1</p>

<p>  sudo poweroff</p></li>
<li><p>列表2</p>

<pre><code>  sudo apt-get upgrade
</code></pre></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-05T10:10:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/05/hellow-world/">
		
			Hellow World</a>
	</h2>
	<div class="entry-content">
		<h2>小测试</h2>

<ul>
<li><p>列表1</p></li>
<li><p>列表2</p>

<ul>
<li><p>二级列表1</p></li>
<li><p>二级列表2</p></li>
</ul>
</li>
<li><p>列表3</p>

<pre><code>  sudo apt-get install ruby
</code></pre></li>
</ul>


<h3>测试的一天</h3>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-05T09:32:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/04/git-note/">
		
			Git Note</a>
	</h2>
	<div class="entry-content">
		<p>最近一段时间学习Git，并在github上注册了帐号，上传了一些自己写的玩具代码，在github上搭建了自己的blog。发现Git是个挺强大的工具，写点笔记以免遗忘。</p>

<p><img src="/images/favicon.ico" title="favicon" alt="" /></p>

<h3>Git和github简要介绍</h3>

<ul>
<li><p>Git 是一款分布式的版本控制系统，由Linux大神 Linus Torvalds为了维护 kernel 开发的。</p></li>
<li><p>Git 和以往的版本控制系统最大的不同就体现在它是分布式的，不是集中式的，不必要连接远程版本库，可以在本地进行提交，不依赖网络环境。</p></li>
<li><p>Git具有很优秀的分支和合并功能，便于团队协作，加快开发进度。</p></li>
<li><p>github 是个代码托管网站，用Git作为其版本控制工具，很好用，很多流行的应用就托管在上面，托管在上面的项目可以方便的 fork, pull request, issuse, 即Social Coding。</p></li>
</ul>


<h3>Git 基本命令</h3>

<ul>
<li><p>创建现场版本库，并初始化。</p>

<pre><code>  $ git init
</code></pre></li>
<li><p>添加文件并提交，在修改任何文件的时候，必须先 add，然后 commit，不容许空
commit。</p>

<pre><code>  $ git add filename
  $ git commit -m "your commit."
</code></pre></li>
<li><p>Git checkout 命令，实质上是修改 HEAD 的指向。</p>

<pre><code>  $ git checkout *** # 可以处于分离头指针的状态，Git无法跟踪，回到
  具体的 branch 要执行 marge 命令。
</code></pre></li>
<li><p>Git reset 命令，一直在 HEAD 分支中操作，用指定提交状态的文件替换掉暂存区的文件。</p>

<pre><code>  $ git reset HEAD &lt;paths&gt; # 取消之前的 git add &lt;paths&gt; 命令，
  即用 HEAD 中的上次 commit 的文件替换暂存区的文件。
</code></pre></li>
<li><p>Git stash 命令。用来保存和恢复进度。</p>

<pre><code>  $ git stash # 保存当前工作进度，会对暂存区和工作区的状态进行保存。
  $ git stash list # 保存进度列表
  $ git stash pop # 恢复最新的工作进度，并从列表中删除
  $ git stash apply # 恢复最近的工作进度，但是不从列表中删除
</code></pre></li>
<li><p>Git 其他基本命令。</p>

<pre><code>  $ git rm # 删除命令
  $ git add # 添加命令
  $ git add -u # 所有改动添加到暂存区
  $ git add -i # 选择性添加，交互模式
  $ git mv # 改名
  $ git cat-file # 和 Linux 中的 cat file 类似
  $ git rev-parse # 功能很多暂时没搞明白
</code></pre></li>
</ul>


<h3>Github 相关命令</h3>

<pre><code>    # 本地建立github.com 项目克隆   
    $ git clone git@github.com:USERNAME/REPOSITORY.git  
    # 添加远程版本库 
    $ git remote add origin git@github.com:USERNAME/REPOSITORY.git  
    $ git push # 上传
    $ git pull # 下载
</code></pre>

<h3>Github 建立blog</h3>

<p>在 github.com 上托管 blog，很酷，免费，而且还可以用 git 进行管理。github.com
上托管的都是静态的网页，一般用 Jekyll 进行维护。项目在GitHub的托管地址：
<a href="http://github.com/mojombo/jekyll/">http://github.com/mojombo/jekyll/</a> ，专有的URL地址为：<a href="http://jekyllrb.com/%E3%80%82">http://jekyllrb.com/%E3%80%82</a></p>

<p>本 blog 用的是 jekyllbootstrap, URL地址为 <a href="http://jekyllbootstrap.com/%E3%80%82%E5%BB%BA%E7%AB%8B">http://jekyllbootstrap.com/%E3%80%82%E5%BB%BA%E7%AB%8B</a>
blog 很简单：</p>

<ul>
<li><p>像普通的项目一样在 github.com 上建立如 USERNAME.github.com 的项目。</p></li>
<li><p>在本地安装 Jekyll-Bootstrap</p>

<pre><code>  $ git clone https://github.com/plusjade/jekyll-bootstrap.git USERNAME.github.com
  $ cd USERNAME.github.com
  $ git remote set-url origin git@github.com:USERNAME/USERNAME.github.com.git
  $ git push origin master
</code></pre></li>
<li><p>安装 Jekyll, 需要 Ruby 支持</p>

<pre><code>  $ gem install jekyll
  # 如果没有安装 Ruby 和 gem 在 ubuntu 下执行
  $ sudo apt-get install ruby gem
  # jekyll 自带的有服务器，启动后访问 http://localhost:4000/ 
  $ cd USERNAME.github.com 
  $ jekyll --server
  # remember to change USERNAME to your GitHub username.
</code></pre></li>
<li><p>生成 post</p>

<pre><code>  $ rake post title="your post title"
  # 生成 time-tittle.md 的文档，在 _posts 目录下，无法生成
  # 带中文的目录，如果想用中文的可以手动修改。
  # 文档为 *.md 是 Markdown 标记语言解析的，比较简单。
</code></pre></li>
<li><p>push 到 github.com</p>

<pre><code>  $ git push
</code></pre></li>
</ul>


<h3>参考资料</h3>

<ol>
<li><a href="http://www.worldhello.net/gotgit/">Git 权威指南</a></li>
<li><a href="http://www.worldhello.net/gotgithub/">GotGitHub</a></li>
<li><a href="http://jekyllbootstrap.com/">jekyllbootstrap</a></li>
<li><a href="http://sixpoint.github.com/">sixpoint&rsquo;s blog</a></li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-04T00:00:00+08:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time></div>
	<div class="tags">

</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/" class="prev">Prev</a>
    
    
        <a href="/blog/page/3/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    tingxueren

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'tingxueren';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-37023627-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>